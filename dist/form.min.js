/** 
* FormJS - v0.3.0.
* https://github.com/mkay581/formjs.git
* Copyright 2015. Licensed MIT.
*/
!function(a){"use strict";"function"==typeof define&&define.amd?define(["element-kit"],function(){return a()}):window.Form=a()}(function(){"use strict";function a(){if("Microsoft Internet Explorer"!=navigator.appName)return!1;var a=navigator.userAgent,b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=b.exec(a)?parseInt(RegExp.$1):void 0}function b(a){var b,c,d=a;for(c=1;c<arguments.length;c++){b=arguments[c];for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e])}return d}function c(){return"undefined"!=typeof window.orientation}var d=function(a){this.initialize(a)};d.prototype={initialize:function(a){this.options=a||{}},getFormElement:function(){return this.options.el},getUIElement:function(){return this.getFormElement()},getFormElements:function(){return[this.getFormElement()]},getValue:function(){return this.getFormElement().value},getUIElements:function(){return[this.getUIElement()]},enable:function(){this.getFormElement().disabled=!1},disable:function(){this.getFormElement().disabled=!0},getElementKey:function(){return"element"},destroy:function(){}};var e=function(a){this.options=a,this._setupEvents()};e.prototype={_setupEvents:function(){var a;for(this.eventEls=this.options.el.elements,a=0;a<this.eventEls.length;a++)this.eventEls[a].kit.addEventListener("change","_onValueChange",this)},_onValueChange:function(a){this.options.onValueChange&&this.options.onValueChange(a)},disable:function(){this.setPropertyAll("disabled",!0)},enable:function(){this.setPropertyAll("disabled",!1)},setPropertyAll:function(a,b){var c,d=this.options.el.elements;for(c=0;c<d.length;c++)d[c][a]=b},getCurrentValues:function(){var a,b,c,d=[],e=this.options.el.querySelectorAll("[name]"),f=e.length;for(a=0;f>a;a++)b=e[a],b.name&&(c={name:b.name,value:b.value},d.push(c));return d},destroy:function(){var a;for(a=0;a<this.eventEls.length;a++)this.eventEls[a].kit.removeEventListener("change","_onValueChange",this)}};var f=function(a){this.initialize(a)};f.prototype=b({},d.prototype,{initialize:function(a){this.options=b({inputs:[],onChange:null,containerClass:"ui-button-toggle",inputClass:"ui-button-toggle-input",selectedClass:"ui-button-toggle-selected",disabledClass:"ui-button-toggle-disabled"},a),d.prototype.initialize.call(this,this.options),this._container=this.options.container,!this.options.inputs.length&&this._container&&(this.options.inputs=this._container.querySelectorAll("input")),this.options.inputs.length?(this._formElements=Array.prototype.slice.call(this.options.inputs),this._UIElements=this._buildUIElements(this._formElements)):console.error("could not build toggle items: no toggle input items were passed"),this.setup()},setup:function(){this._triggerAll(function(a){a.kit.classList.add(this.options.inputClass)}.bind(this)),this._setupEvents()},_setupEvents:function(){this._triggerAll(function(a){a.kit.addEventListener("click","_onFormElementClick",this)}.bind(this))},getFormElements:function(){return this._formElements},getUIElements:function(){return this._UIElements},_triggerAll:function(a){var b,c=this.getFormElements(),d=this.getUIElements();for(b=0;b<c.length;b++)a(c[b],d[b],b)},_onFormElementClick:function(a){var b=a.currentTarget.getElementsByClassName(this.options.inputClass)[0],c=a.currentTarget.getElementsByClassName(this.options.containerClass)[0];a.currentTarget===a.target&&(b=a.target,c=a.target.parentElement,this._delegateClick(b,c))},_delegateClick:function(a,b){this.isRadio()?this._processRadioClick(a,b):this._processCheckboxClick(a,b)},_processRadioClick:function(a,b){this._lastRadioClicked!==a&&(this._triggerAll(function(a,b){b.kit.classList.remove(this.options.selectedClass),a.checked=!1}.bind(this)),this._onToggleSelect(a,b),this._lastRadioClicked=a)},_processCheckboxClick:function(a,b){b.kit.classList.contains(this.options.selectedClass)?this._onToggleDeselect(a,b):this._onToggleSelect(a,b)},_onToggleSelect:function(a,b){a.checked=!0,b.kit.classList.add(this.options.selectedClass),this._triggerChange(a,b)},_onToggleDeselect:function(a,b){a.checked=!1,b.kit.classList.remove(this.options.selectedClass),this._triggerChange(a,b)},_buildUIElements:function(a){var b,c,d,e=a.length,f=[];for(b=0;e>b;b++)c=a[b],d=c.kit.appendOuterHtml('<div class="'+this.options.containerClass+'"></div>'),c.checked&&d.kit.classList.add(this.options.selectedClass),c.disabled&&d.kit.classList.add(this.options.disabledClass),f.push(d);return f},isRadio:function(){return"radio"===this.getFormElements()[0].getAttribute("type")},_triggerChange:function(a,b){this.options.onChange&&this.options.onChange(a.value,a,b)},select:function(a){var b=this.getFormElement(a),c=this.getUIElement(a);b.checked||(b.checked=!0,c.kit.classList.add(this.options.selectedClass),this._triggerChange(b,c)),this.isRadio()&&this._triggerAll(function(a,b,c){a.checked||this.deselect(c)}.bind(this))},getValue:function(){var a=this.getFormElements().filter(function(a){return a.checked},this);return a.length?a[0].value:""},deselect:function(a){var b=this.getFormElement(a),c=this.getUIElement(a);c.kit.classList.remove(this.options.selectedClass),b.checked&&(b.checked=!1,this._triggerChange(b,c))},getFormElement:function(a){return this.getFormElements()[a||0]},getUIElement:function(a){return this.getUIElements()[a||0]},enable:function(){this._triggerAll(function(a,b){a.disabled=!1,b.kit.classList.remove(this.options.disabledClass)}.bind(this))},disable:function(){this._triggerAll(function(a,b){a.disabled=!0,b.kit.classList.add(this.options.disabledClass)}.bind(this))},getElementKey:function(){return this.isRadio()?"buttonToggleRadio":"buttonToggleCheckbox"},destroy:function(){this._triggerAll(function(a,b){b.parentNode.replaceChild(a,b),a.addEventListener("click","_onFormElementClick",this)}.bind(this)),d.prototype.destroy.call(this)}}),e.ButtonToggle=f;var g=function(a){this.initialize(a)};g.prototype=b({},d.prototype,{initialize:function(a){this.options=b({el:null,onChecked:null,onUnchecked:null,containerClass:"ui-checkbox",inputClass:"ui-checkbox-input",checkedClass:"ui-checkbox-checked",disabledClass:"ui-checkbox-disabled"},a),this.el=this.options.el,"input"!==this.el.tagName.toLowerCase()&&console.warn("checkbox error: element passed in instantiation was not an input element"),d.prototype.initialize.call(this,this.options),this.setup()},setup:function(){var a=this.getFormElement();a.kit.classList.add(this.options.inputClass),this._container=this._buildUIElement(this.el),this.isInitChecked=a.checked,this.isInitChecked&&this._container.kit.classList.add(this.options.checkedClass),this.isInitDisabled=a.disabled,this.isInitDisabled&&this._container.kit.classList.add(this.options.disabledClass),this.getUIElement().kit.addEventListener("click","_onClick",this)},_onClick:function(){var a=this.getFormElement();a.disabled||(this.getUIElement().kit.classList.contains(this.options.checkedClass)?this.uncheck():this.check())},_buildUIElement:function(a){return a.kit.appendOuterHtml('<div class="'+this.options.containerClass+'"></div>')},check:function(){var a=this.getFormElement(),b=this.getUIElement();a.checked||(a.checked=!0),b.kit.classList.add(this.options.checkedClass),this.options.onChecked&&this.options.onChecked(a.value,a,b)},uncheck:function(){var a=this.getFormElement(),b=this.getUIElement();a.checked&&(a.checked=!1),b.kit.classList.remove(this.options.checkedClass),this.options.onUnchecked&&this.options.onUnchecked(a.value,a,b)},enable:function(){this.getFormElement().disabled=!1,this.getUIElement().kit.classList.remove(this.options.disabledClass)},disable:function(){this.getFormElement().disabled=!0,this.getUIElement().kit.classList.add(this.options.disabledClass)},getFormElement:function(){return this.el},getUIElement:function(){return this._container},getElementKey:function(){return"checkbox"},destroy:function(){var a=this.getUIElement(),b=this.getFormElement();a.kit.removeEventListener("click","_onClick",this),a.parentNode.replaceChild(b,a),this.isInitChecked&&(b.checked=!0),this.isInitDisabled&&(b.disabled=!0),d.prototype.destroy.call(this)}}),e.Checkbox=g;var h=function(a){this.initialize(a)};h.prototype=b({},d.prototype,{initialize:function(a){this.options=b({el:null,onChange:null,onKeyDownChange:null,containerClass:"ui-input-text",inputClass:"ui-input-text-input",disabledClass:"ui-input-text-disabled",activeClass:"ui-input-text-active",placeholderClass:"ui-input-text-placeholder"},a),d.prototype.initialize.call(this,this.options),this.setup()},setup:function(){var a=this.options.el;a.kit.classList.add(this.options.inputClass),this._container=this._buildUIElement(a),this._inputEl=this._container.getElementsByClassName(this.options.inputClass)[0],this.origInputValue=a.value,this.isInitDisabled=a.disabled,this.isInitDisabled&&this._container.kit.classList.add(this.options.disabledClass),this._bindEvents(),this.origInputValue||this.showPlaceholder()},_bindEvents:function(){var a=this.getFormElement();a.kit.addEventListener("focus","_onInputFocus",this),a.kit.addEventListener("blur","_onInputBlur",this),a.kit.addEventListener("change","_onInputValueChange",this),a.kit.addEventListener("keydown","_onInputKeyDown",this)},_unbindEvents:function(){var a=this.getFormElement();a.kit.removeEventListener("focus","_onInputFocus",this),a.kit.removeEventListener("blur","_onInputBlur",this),a.kit.removeEventListener("change","_onInputValueChange",this),a.kit.removeEventListener("keydown","_onInputKeyDown",this)},_onInputKeyDown:function(a){this.keyDownTimeoutId&&clearTimeout(this.keyDownTimeoutId),this.keyDownTimeoutId=setTimeout(this._triggerKeyDownChange.bind(this,a),1)},_triggerKeyDownChange:function(a){this.options.onKeyDownChange&&this.options.onKeyDownChange(this.getFormElement(),this.getUIElement(),a)},isPlaceholderSupported:function(){var b=a();return!b||8!==b&&9!==b},showPlaceholder:function(){this.isPlaceholderSupported()||(this.getFormElement().value=this.getPlaceholder(),this.getUIElement().kit.classList.add(this.options.placeholderClass))},setValue:function(a){var b=this.getFormElement(),c=b.value;a!==c&&a!==this.getPlaceholder()&&(this.getFormElement().value=a,this._triggerChange())},getValue:function(){return this.getFormElement().value},clearPlaceholder:function(){this.isPlaceholderSupported()||(this.getFormElement().value="",this.getUIElement().kit.classList.remove(this.options.placeholderClass))},_buildUIElement:function(a){return a.kit.appendOuterHtml('<div class="'+this.options.containerClass+'"></div>')},getPlaceholder:function(){var a=this.getFormElement().getAttribute("placeholder");return null===a&&(a=""),a},_onInputFocus:function(){this.getValue()===this.getPlaceholder()&&this.clearPlaceholder(),this.getUIElement().kit.classList.add(this.options.activeClass)},_onInputBlur:function(){this.getValue()||this.showPlaceholder(),this.getUIElement().kit.classList.remove(this.options.activeClass)},_triggerChange:function(a){var b=[this.getValue(),this.getFormElement(),this.getUIElement()];a&&b.push(a),this.options.onChange&&this.options.onChange.apply(this,b)},_onInputValueChange:function(a){this._triggerChange(a)},getFormElement:function(){return this._inputEl},getUIElement:function(){return this._container},enable:function(){this.getFormElement().removeAttribute("disabled"),this.getUIElement().kit.classList.remove(this.options.disabledClass)},disable:function(){this.getFormElement().setAttribute("disabled","true"),this.getUIElement().kit.classList.add(this.options.disabledClass)},getElementKey:function(){return"inputText"},destroy:function(){var a=this.getUIElement(),b=this.getFormElement();this._unbindEvents(),a.parentNode.replaceChild(b,a),this.isInitDisabled&&b.setAttribute("disabled","true"),this.setValue(this.origInputValue),d.prototype.destroy.call(this)}}),e.InputField=h;var i=function(a){this.initialize(a)};return i.prototype=b({},d.prototype,{initialize:function(a){this.options=b({el:null,onChange:null,autoSetup:!0,containerClass:"dropdown-container",optionsContainerClass:"dropdown-option-container",optionsContainerActiveClass:"dropdown-option-container-active",optionsClass:"dropdown-option",optionsSelectedClass:"dropdown-option-selected",selectedValueContainerClass:"dropdown-value-container",selectedValueContainerActiveClass:"dropdown-value-container-active",disabledClass:"dropdown-disabled"},a),d.prototype.initialize.call(this,this.options),this.options.autoSetup&&this.setup()},setup:function(){var a=this.options.el,b=a.querySelectorAll("option[selected]")[0];a.kit.addEventListener("change","_onSelectChange",this),c()||(this._origDisplayValue=a.style.display,a.style.display="none",a.insertAdjacentHTML("afterend",'<div class="'+this.options.containerClass+'">'+this._buildSelectedValueHtml()+this._buildOptionsHtml()+"</div>"),this._setupEvents(),b&&this._setUISelectedValue(b.value,b.textContent),this.getFormElement().disabled&&this.disable())},_setUISelectedValue:function(a){var b=this.getUIElement().getElementsByClassName(this.options.optionsContainerClass)[0],c=b.getElementsByClassName(this.options.optionsSelectedClass)[0],d=b.querySelectorAll("."+this.options.optionsClass+'[data-value="'+a+'"]')[0],e=this.options.optionsSelectedClass,f=this.getUIElement().getElementsByClassName(this.options.selectedValueContainerClass)[0];this.getFormElement().disabled||(f.setAttribute("data-value",a),f.innerHTML=d.textContent,c&&c.kit.classList.remove(e),d.kit.classList.add(e))},_setupEvents:function(){var a,b=this.getUIElement(),c=b.getElementsByClassName(this.options.selectedValueContainerClass)[0],d=b.getElementsByClassName(this.options.optionsClass),e=d.length;for(c.kit.addEventListener("click","_onClickUIValueContainer",this),a=0;e>a;a++)d[a].kit.addEventListener("click","_onClickUIOption",this)},_onClickUIValueContainer:function(){this.getUIElement().kit.classList.toggle(this.options.optionsContainerActiveClass)},_onClickUIOption:function(a){var b=a.currentTarget,c=b.kit.dataset.value,d=b.textContent;this.getValue()!==c&&(this.setValue(c),this._setUISelectedValue(c,d))},_buildSelectedValueHtml:function(){return'<div class="'+this.options.selectedValueContainerClass+'" data-value=""></div>'},_buildOptionsHtml:function(){var a,b,c=this.options,d=document.createElement("div"),e='<div class="'+c.optionsContainerClass+'">',f=c.el.getElementsByTagName("option"),g=f.length,h="";for(d.kit.classList.add(c.optionsContainerClass),a=0;g>a;a++)b=f[a],h=b.hasAttribute("selected")?c.optionsSelectedClass:"",e+='<div class="'+c.optionsClass+" "+h+'" data-value="'+b.value+'">'+b.textContent+"</div>";return e+="</div>"},_onSelectChange:function(a){this.options.onChange&&this.options.onChange(this.getFormElement(),this.getUIElement(),a)},getUIElement:function(){return this.getFormElement().nextSibling||this.getFormElement()},getOptionByDataValue:function(a){return this.options.el.querySelectorAll('option[value="'+a+'"]')[0]},getOptionByDisplayValue:function(a){var b,c,d=this.options.el.querySelectorAll("option"),e=d.length;for(b=0;e>b&&(c=d[b],c.textContent!==a);b++);return c},setValue:function(a){var b=this.getOptionByDataValue(this.getValue()),d=this.getOptionByDataValue(a),e=document.createEvent("HTMLEvents"),f=this.getFormElement();f.disabled||(e.initEvent("change",!1,!0),b&&b.removeAttribute("selected"),d?(d.setAttribute("selected","selected"),f.value=a,f.dispatchEvent(e)):console.warn("Form Dropdown Error: Cannot call setValue(), dropdown has no option element with a value attribute of "+a+"."),c()||this._setUISelectedValue(a,d.textContent))},disable:function(){this.getUIElement().kit.classList.add(this.options.disabledClass),this.getFormElement().disabled=!0},enable:function(){this.getUIElement().kit.classList.remove(this.options.disabledClass),this.getFormElement().disabled=!1},getDisplayValue:function(){return this.getOptionByDataValue(this.getValue()).textContent},destroy:function(){var a=this.options.el;a.kit.removeEventListener("change","_onSelectChange",this),a.style.display=this._origDisplayValue}}),e.Dropdown=i,e});